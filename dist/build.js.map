{"version":3,"file":"build.js","mappings":"CAAA,SAA2CA,EAAMC,GAC1B,iBAAZC,SAA0C,iBAAXC,OACxCA,OAAOD,QAAUD,IACQ,mBAAXG,QAAyBA,OAAOC,IAC9CD,OAAO,GAAIH,GACe,iBAAZC,QACdA,QAAuB,cAAID,IAE3BD,EAAoB,cAAIC,GACzB,CATD,CASGK,MAAM,I,mBCRT,IAAIC,EAAsB,CCA1BA,EAAwB,CAACL,EAASM,KACjC,IAAI,IAAIC,KAAOD,EACXD,EAAoBG,EAAEF,EAAYC,KAASF,EAAoBG,EAAER,EAASO,IAC5EE,OAAOC,eAAeV,EAASO,EAAK,CAAEI,YAAY,EAAMC,IAAKN,EAAWC,IAE1E,ECNDF,EAAwB,CAACQ,EAAKC,IAAUL,OAAOM,UAAUC,eAAeC,KAAKJ,EAAKC,GCClFT,EAAyBL,IACH,oBAAXkB,QAA0BA,OAAOC,aAC1CV,OAAOC,eAAeV,EAASkB,OAAOC,YAAa,CAAEC,MAAO,WAE7DX,OAAOC,eAAeV,EAAS,aAAc,CAAEoB,OAAO,GAAO,G,KCL/C,SAASC,EAAgBC,EAAUC,GAChD,KAAMD,aAAoBC,GACxB,MAAM,IAAIC,UAAU,oCAExB,CCJe,SAASC,EAAQjB,GAG9B,OAAOiB,EAAU,mBAAqBP,QAAU,iBAAmBA,OAAOQ,SAAW,SAAUlB,GAC7F,cAAcA,CAChB,EAAI,SAAUA,GACZ,OAAOA,GAAK,mBAAqBU,QAAUV,EAAEmB,cAAgBT,QAAUV,IAAMU,OAAOH,UAAY,gBAAkBP,CACpH,EAAGiB,EAAQjB,EACb,CCNe,SAASoB,EAAcC,GACpC,IAAIC,ECFS,SAAqBD,EAAGE,GACrC,GAAI,UAAYN,EAAQI,KAAOA,EAAG,OAAOA,EACzC,IAAIG,EAAIH,EAAEX,OAAOe,aACjB,QAAI,IAAWD,EAAG,CAChB,IAAIF,EAAIE,EAAEf,KAAKY,EAAGE,GAAK,WACvB,GAAI,UAAYN,EAAQK,GAAI,OAAOA,EACnC,MAAM,IAAIN,UAAU,+CACtB,CACA,OAAQ,WAAaO,EAAIG,OAASC,QAAQN,EAC5C,CDPUI,CAAYJ,EAAG,UACvB,MAAO,UAAYJ,EAAQK,GAAKA,EAAII,OAAOJ,EAC7C,CEJA,SAASM,EAAkBC,EAAQC,GACjC,IAAK,IAAIR,EAAI,EAAGA,EAAIQ,EAAMC,OAAQT,IAAK,CACrC,IAAIU,EAAaF,EAAMR,GACvBU,EAAW7B,WAAa6B,EAAW7B,aAAc,EACjD6B,EAAWC,cAAe,EACtB,UAAWD,IAAYA,EAAWE,UAAW,GACjDjC,OAAOC,eAAe2B,EAAQT,EAAcY,EAAWjC,KAAMiC,EAC/D,CACF,CACe,SAASG,EAAapB,EAAaqB,EAAYC,GAM5D,OALID,GAAYR,EAAkBb,EAAYR,UAAW6B,GACrDC,GAAaT,EAAkBb,EAAasB,GAChDpC,OAAOC,eAAea,EAAa,YAAa,CAC9CmB,UAAU,IAELnB,CACT,C,8BC+BA,YAhDa,WACX,SAAAuB,IAAezB,EAAA,KAAAyB,GACbC,KAAKC,UAAY,IAAIC,GACvB,CA0CC,OA1CAN,EAAAG,EAAA,EAAAvC,IAAA,cAAAa,MAED,SAAa8B,EAAOC,EAAUC,GAC5B,MAAwB,mBAAbD,IACTJ,KAAKC,UAAUK,IAAIH,IAAUH,KAAKC,UAAUM,IAAIJ,EAAO,IACvDH,KAAKC,UAAUpC,IAAIsC,GAAOK,KAAK,CAAEJ,SAAAA,EAAUC,GAAAA,KACpC,EAGX,GAAC,CAAA7C,IAAA,iBAAAa,MAED,SAAgB8B,EAAOC,EAAUC,GAC/B,IACII,EADER,EAAYD,KAAKC,UAAUpC,IAAIsC,GAGrC,SAAIF,GAAaA,EAAUT,SACzBiB,EAAQR,EAAUS,QAAO,SAAC3B,EAAG4B,EAAUF,GAIrC,MAHiC,mBAAtBE,EAASP,UAA2BO,EAASP,WAAaA,GAAYO,EAASN,KAAOA,IAC/FtB,EAAI0B,GAEC1B,CACT,IAAI,KAES,KACXkB,EAAUW,OAAOH,EAAO,GACxBT,KAAKC,UAAUM,IAAIJ,EAAOF,IACnB,EAIb,GAAC,CAAAzC,IAAA,OAAAa,MAED,SAAM8B,GAAgB,QAAAU,EAAAC,UAAAtB,OAANuB,EAAI,IAAAC,MAAAH,EAAA,EAAAA,EAAA,KAAAI,EAAA,EAAAA,EAAAJ,EAAAI,IAAJF,EAAIE,EAAA,GAAAH,UAAAG,GAClB,IAAMhB,EAAYD,KAAKC,UAAUpC,IAAIsC,GAErC,SAAIF,IAAaA,EAAUT,UACzBS,EAAUiB,SAAQ,SAACP,GAAa,IAAAQ,GAC9BA,EAAAR,EAASP,UAASlC,KAAIkD,MAAAD,EAAA,CAACR,EAASN,IAAEgB,OAAKN,GACzC,KACO,EAGX,KAAChB,CAAA,CA7CU,ICAkB,IAAAuB,EAAA,WAG7B,SAAAA,EAAaC,GAA0B,IAAXC,EAAIV,UAAAtB,OAAA,QAAAiC,IAAAX,UAAA,GAAAA,UAAA,GAAG,CAAC,EAGlC,GAHmCxC,EAAA,KAAAgD,GACnCtB,KAAK0B,OAASF,EAAKE,QAAUF,EAAKE,OAAOC,cAErCJ,EAAcK,WAAW,MAAO,CAClC,IAAMC,EAAsC,WAA7BC,OAAOC,SAASC,SAAwB,MAAQ,KAC/DT,EAAgB,GAAHF,OAAMQ,EAAM,KAAAR,OAAIE,EAC/B,CAEAvB,KAAKuB,cAAgBA,EACrBvB,KAAKwB,KAAOA,EAEZxB,KAAKiC,aAAejC,KAAKwB,KAAKS,eAAgB,EAC9CjC,KAAKkC,qBAAuBlC,KAAKwB,KAAKU,sBAAwBC,IAC9DnC,KAAKoC,kBAAoBpC,KAAKwB,KAAKY,mBAAqB,IACxDpC,KAAKqC,mBAAqB,EAC1BrC,KAAKsC,kBAAoB,EAEzBtC,KAAKuC,mBAAqBvC,KAAKwB,KAAKe,qBAAsB,EAE1DvC,KAAKwC,QAAQjB,EAAeC,GAExBA,EAAKiB,QAASzC,KAAKyC,MAAQjB,EAAKiB,OAChCjB,EAAKkB,YAAa1C,KAAK0C,UAAYlB,EAAKkB,WAC5C1C,KAAK2C,SACP,CAyEC,OAzEA/C,EAAA0B,EAAA,EAAA9D,IAAA,UAAAa,MAED,SAASkD,GAA0B,IAAAqB,EAAA,KAAXpB,EAAIV,UAAAtB,OAAA,QAAAiC,IAAAX,UAAA,GAAAA,UAAA,GAAG,CAAC,EACxBkB,EAAWR,EAAKQ,UAAY,GAQlC,OAPAhC,KAAK6C,UAAYrB,EAAKqB,YAA2B,KAAbb,EAAkB,IAAIa,UAAUtB,GAAiB,IAAIsB,UAAUtB,EAAeS,IAC9F,SAAhBhC,KAAK0B,SACD,YAAa1B,KAAK6C,YACtB7C,KAAK6C,UAAUC,QAAU,SAAChF,GAAG,OAAK8E,EAAKC,UAAUE,KAAKC,KAAKC,UAAUnF,GAAK,IAIvEkC,KAAK6C,SACd,GAAC,CAAArF,IAAA,YAAAa,MAED,WAAa,IAAA6E,EAAA,KACPlD,KAAKsC,mBAAqBtC,KAAKkC,sBACjClC,KAAKsC,oBACLa,aAAanD,KAAKqC,oBAElBrC,KAAKqC,mBAAqBe,YAAW,WAC/BF,EAAKT,OAASS,EAAKG,YAAY,mBAAoBH,EAAKZ,mBAE5DY,EAAKV,QAAQU,EAAK3B,cAAe2B,EAAK1B,MACtC0B,EAAKP,SACP,GAAG3C,KAAKoC,oBAEJpC,KAAKyC,OAASzC,KAAKqD,YAAY,0BAA0B,EAEjE,GAAC,CAAA7F,IAAA,UAAAa,MAED,WAAW,IAAAiF,EAAA,KACT,CAAC,YAAa,UAAW,UAAW,UAAUpC,SAAQ,SAACqC,GACrDD,EAAKT,UAAUU,GAAa,SAACC,GAC3BzD,EAAQ0D,KAAKF,EAAWC,GAEpBF,EAAKb,OAASa,EAAKD,YAAY,UAAYE,EAAWC,GAEtDF,EAAKrB,cAA8B,WAAdsB,IACvBD,EAAK9B,KAAKkC,aAAaF,EAAMG,eAC7BL,EAAKhB,kBAAoB,GAGvBgB,EAAKrB,cAA8B,YAAdsB,GAA2BD,EAAKM,WAC3D,CACF,GACF,GAAC,CAAApG,IAAA,cAAAa,MAED,SAAawF,EAAWL,GAClBxD,KAAKuC,mBACPvC,KAAKuC,mBAAmBsB,EAAWL,EAAOxD,KAAK8D,mBAAmBC,KAAK/D,OAEvEA,KAAK8D,mBAAmBD,EAAWL,EAEvC,GAAC,CAAAhG,IAAA,qBAAAa,MAED,SAAoBwF,EAAWL,GAC7B,GAAKK,EAAUjC,WAAW,WAA1B,CACA,IAAIoC,EAAS,SACT1E,EAASuE,EAAUI,cACnBC,EAAMV,EACU,SAAhBxD,KAAK0B,QAAqB8B,EAAMW,QAClCD,EAAMlB,KAAKoB,MAAMZ,EAAMW,OACfE,SACN/E,EAAS,CAAC4E,EAAII,WAAa,GAAIJ,EAAIG,UAAUE,QAAO,SAACtF,GAAC,QAAOA,CAAC,IAAEuF,KAAK,KAC5DN,EAAIO,SACbT,EAAS,WACT1E,EAAS,CAAC4E,EAAII,WAAa,GAAIJ,EAAIO,QAAQF,QAAO,SAACtF,GAAC,QAAOA,CAAC,IAAEuF,KAAK,OAGnExE,KAAK0C,YACPpD,EAASU,KAAK0C,UAAUpD,IAAWA,GAErCU,KAAKyC,MAAMuB,GAAQ1E,EAAQ4E,EAhBoB,CAiBjD,KAAC5C,CAAA,CApG4B,GCG/B,SAEEoD,QAAO,SAAEC,EAAKC,GAAuB,IAAXpD,EAAIV,UAAAtB,OAAA,QAAAiC,IAAAX,UAAA,GAAAA,UAAA,GAAG,CAAC,EAChC,IAAK8D,IAAepD,EAAKqD,gBAAmB,MAAM,IAAIC,MAAM,gDAE5D,IAAIC,EAAW,KAEfvD,EAAKkC,aAAe,SAACsB,GACnBL,EAAI3G,UAAUiH,QAAUD,CAC1B,EAEIxD,EAAKqD,iBACPF,EAAI3G,UAAUkH,SAAW,WAAuD,IAAtD3D,EAAaT,UAAAtB,OAAA,QAAAiC,IAAAX,UAAA,GAAAA,UAAA,GAAG8D,EAAYO,EAAcrE,UAAAtB,OAAA,QAAAiC,IAAAX,UAAA,GAAAA,UAAA,GAAGU,EACrE2D,EAAezB,aAAelC,EAAKkC,aACnCqB,EAAW,IAAIK,EAAS7D,EAAe4D,GACvCR,EAAI3G,UAAUiH,QAAUF,EAASlC,SACnC,EAEA8B,EAAI3G,UAAUqH,YAAc,WACtBN,GAAYA,EAAS9C,eACvB8C,EAAS9C,cAAe,EACxBkB,aAAa4B,EAAS1C,qBAEpBsC,EAAI3G,UAAUiH,UAChBN,EAAI3G,UAAUiH,QAAQK,eACfX,EAAI3G,UAAUiH,QAEzB,IAEAF,EAAW,IAAIK,EAASR,EAAYpD,GACpCmD,EAAI3G,UAAUiH,QAAUF,EAASlC,WAEnC,IAAM0C,EAA4B,oBAAVC,OAA0C,mBAAVA,OAAwB,cAAcC,KAAKD,MAAME,YAEzGf,EAAIgB,MAAM,CACRC,QAAO,WAAI,IAAAhD,EAAA,KACHvC,EAAKL,KACL6F,EAAU7F,KAAK8F,SAASD,QAE1BN,GACFvF,KAAK8F,SAASD,QAAU,IAAIL,MAAM,CAAC,EAAG,CACpCjF,IAAG,SAAEjB,EAAQ9B,EAAKa,GAGhB,OAFA0B,EAAQgG,YAAYvI,EAAKa,EAAOgC,GAChCf,EAAO9B,GAAOa,GACP,CACT,EACA2H,eAAc,SAAE1G,EAAQ9B,GAGtB,OAFAuC,EAAQkG,eAAezI,EAAK6C,EAAGyF,SAASD,QAAQrI,GAAM6C,UAC/Cf,EAAO9B,KACP,CACT,IAEEqI,GACFnI,OAAOwI,KAAKL,GAAS3E,SAAQ,SAAC1D,GAC5BoF,EAAKkD,SAASD,QAAQrI,GAAOqI,EAAQrI,EACvC,MAGFE,OAAOyI,KAAKnG,KAAK8F,SAASD,SAGtBA,GACFnI,OAAOwI,KAAKL,GAAS3E,SAAQ,SAAA1D,GAC3BuC,EAAQgG,YAAYvI,EAAKqI,EAAQrI,GAAM6C,EACzC,IAGN,EACA+F,cAAa,WAAI,IAAAlD,EAAA,KACf,GAAIqC,EAAU,CACZ,IAAMM,EAAU7F,KAAK8F,SAASD,QAE1BA,GACFnI,OAAOwI,KAAKL,GAAS3E,SAAQ,SAAC1D,UACrB0F,EAAK4C,SAASD,QAAQrI,EAC/B,GAEJ,CACF,GAEJ,G","sources":["webpack://VueNativeSock/webpack/universalModuleDefinition","webpack://VueNativeSock/webpack/bootstrap","webpack://VueNativeSock/webpack/runtime/define property getters","webpack://VueNativeSock/webpack/runtime/hasOwnProperty shorthand","webpack://VueNativeSock/webpack/runtime/make namespace object","webpack://VueNativeSock/./node_modules/@babel/runtime/helpers/esm/classCallCheck.js","webpack://VueNativeSock/./node_modules/@babel/runtime/helpers/esm/typeof.js","webpack://VueNativeSock/./node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","webpack://VueNativeSock/./node_modules/@babel/runtime/helpers/esm/toPrimitive.js","webpack://VueNativeSock/./node_modules/@babel/runtime/helpers/esm/createClass.js","webpack://VueNativeSock/./src/Emitter.js","webpack://VueNativeSock/./src/Observer.js","webpack://VueNativeSock/./src/Main.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"VueNativeSock\"] = factory();\n\telse\n\t\troot[\"VueNativeSock\"] = factory();\n})(self, () => {\nreturn ","// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","export default function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nexport default function toPropertyKey(t) {\n  var i = toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : String(i);\n}","import _typeof from \"./typeof.js\";\nexport default function toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}","import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, toPropertyKey(descriptor.key), descriptor);\n  }\n}\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}","class Emitter {\n  constructor () {\n    this.listeners = new Map()\n  }\n\n  addListener (label, callback, vm) {\n    if (typeof callback === 'function') {\n      this.listeners.has(label) || this.listeners.set(label, [])\n      this.listeners.get(label).push({ callback, vm })\n      return true\n    }\n    return false\n  }\n\n  removeListener (label, callback, vm) {\n    const listeners = this.listeners.get(label)\n    let index\n\n    if (listeners && listeners.length) {\n      index = listeners.reduce((i, listener, index) => {\n        if (typeof listener.callback === 'function' && listener.callback === callback && listener.vm === vm) {\n          i = index\n        }\n        return i\n      }, -1)\n\n      if (index > -1) {\n        listeners.splice(index, 1)\n        this.listeners.set(label, listeners)\n        return true\n      }\n    }\n    return false\n  }\n\n  emit (label, ...args) {\n    const listeners = this.listeners.get(label)\n\n    if (listeners && listeners.length) {\n      listeners.forEach((listener) => {\n        listener.callback.call(listener.vm, ...args)\n      })\n      return true\n    }\n    return false\n  }\n}\n\nexport default new Emitter()\n","import Emitter from './Emitter'\n\nexport default class {\n  constructor (connectionUrl, opts = {}) {\n    this.format = opts.format && opts.format.toLowerCase()\n\n    if (connectionUrl.startsWith('//')) {\n      const scheme = window.location.protocol === 'https:' ? 'wss' : 'ws'\n      connectionUrl = `${scheme}:${connectionUrl}`\n    }\n\n    this.connectionUrl = connectionUrl\n    this.opts = opts\n\n    this.reconnection = this.opts.reconnection || false\n    this.reconnectionAttempts = this.opts.reconnectionAttempts || Infinity\n    this.reconnectionDelay = this.opts.reconnectionDelay || 1000\n    this.reconnectTimeoutId = 0\n    this.reconnectionCount = 0\n\n    this.passToStoreHandler = this.opts.passToStoreHandler || false\n\n    this.connect(connectionUrl, opts)\n\n    if (opts.store) { this.store = opts.store }\n    if (opts.mutations) { this.mutations = opts.mutations }\n    this.onEvent()\n  }\n\n  connect (connectionUrl, opts = {}) {\n    const protocol = opts.protocol || ''\n    this.WebSocket = opts.WebSocket || (protocol === '' ? new WebSocket(connectionUrl) : new WebSocket(connectionUrl, protocol))\n    if (this.format === 'json') {\n      if (!('sendObj' in this.WebSocket)) {\n        this.WebSocket.sendObj = (obj) => this.WebSocket.send(JSON.stringify(obj))\n      }\n    }\n\n    return this.WebSocket\n  }\n\n  reconnect () {\n    if (this.reconnectionCount <= this.reconnectionAttempts) {\n      this.reconnectionCount++\n      clearTimeout(this.reconnectTimeoutId)\n\n      this.reconnectTimeoutId = setTimeout(() => {\n        if (this.store) { this.passToStore('SOCKET_RECONNECT', this.reconnectionCount) }\n\n        this.connect(this.connectionUrl, this.opts)\n        this.onEvent()\n      }, this.reconnectionDelay)\n    } else {\n      if (this.store) { this.passToStore('SOCKET_RECONNECT_ERROR', true) }\n    }\n  }\n\n  onEvent () {\n    ['onmessage', 'onclose', 'onerror', 'onopen'].forEach((eventType) => {\n      this.WebSocket[eventType] = (event) => {\n        Emitter.emit(eventType, event)\n\n        if (this.store) { this.passToStore('SOCKET_' + eventType, event) }\n\n        if (this.reconnection && eventType === 'onopen') {\n          this.opts.$setInstance(event.currentTarget)\n          this.reconnectionCount = 0\n        }\n\n        if (this.reconnection && eventType === 'onclose') { this.reconnect() }\n      }\n    })\n  }\n\n  passToStore (eventName, event) {\n    if (this.passToStoreHandler) {\n      this.passToStoreHandler(eventName, event, this.defaultPassToStore.bind(this))\n    } else {\n      this.defaultPassToStore(eventName, event)\n    }\n  }\n\n  defaultPassToStore (eventName, event) {\n    if (!eventName.startsWith('SOCKET_')) { return }\n    let method = 'commit'\n    let target = eventName.toUpperCase()\n    let msg = event\n    if (this.format === 'json' && event.data) {\n      msg = JSON.parse(event.data)\n      if (msg.mutation) {\n        target = [msg.namespace || '', msg.mutation].filter((e) => !!e).join('/')\n      } else if (msg.action) {\n        method = 'dispatch'\n        target = [msg.namespace || '', msg.action].filter((e) => !!e).join('/')\n      }\n    }\n    if (this.mutations) {\n      target = this.mutations[target] || target\n    }\n    this.store[method](target, msg)\n  }\n}\n","import Observer from './Observer'\nimport Emitter from './Emitter'\n\nexport default {\n\n  install (Vue, connection, opts = {}) {\n    if (!connection && !opts.connectManually) { throw new Error('[vue-native-socket] cannot locate connection') }\n\n    let observer = null\n\n    opts.$setInstance = (wsInstance) => {\n      Vue.prototype.$socket = wsInstance\n    }\n\n    if (opts.connectManually) {\n      Vue.prototype.$connect = (connectionUrl = connection, connectionOpts = opts) => {\n        connectionOpts.$setInstance = opts.$setInstance\n        observer = new Observer(connectionUrl, connectionOpts)\n        Vue.prototype.$socket = observer.WebSocket\n      }\n\n      Vue.prototype.$disconnect = () => {\n        if (observer && observer.reconnection) {\n          observer.reconnection = false\n          clearTimeout(observer.reconnectTimeoutId)\n        }\n        if (Vue.prototype.$socket) {\n          Vue.prototype.$socket.close()\n          delete Vue.prototype.$socket\n        }\n      }\n    } else {\n      observer = new Observer(connection, opts)\n      Vue.prototype.$socket = observer.WebSocket\n    }\n    const hasProxy = typeof Proxy !== 'undefined' && typeof Proxy === 'function' && /native code/.test(Proxy.toString())\n\n    Vue.mixin({\n      created () {\n        const vm = this\n        const sockets = this.$options.sockets\n\n        if (hasProxy) {\n          this.$options.sockets = new Proxy({}, {\n            set (target, key, value) {\n              Emitter.addListener(key, value, vm)\n              target[key] = value\n              return true\n            },\n            deleteProperty (target, key) {\n              Emitter.removeListener(key, vm.$options.sockets[key], vm)\n              delete target.key\n              return true\n            }\n          })\n          if (sockets) {\n            Object.keys(sockets).forEach((key) => {\n              this.$options.sockets[key] = sockets[key]\n            })\n          }\n        } else {\n          Object.seal(this.$options.sockets)\n\n          // if !hasProxy need addListener\n          if (sockets) {\n            Object.keys(sockets).forEach(key => {\n              Emitter.addListener(key, sockets[key], vm)\n            })\n          }\n        }\n      },\n      beforeDestroy () {\n        if (hasProxy) {\n          const sockets = this.$options.sockets\n\n          if (sockets) {\n            Object.keys(sockets).forEach((key) => {\n              delete this.$options.sockets[key]\n            })\n          }\n        }\n      }\n    })\n  }\n}\n"],"names":["root","factory","exports","module","define","amd","self","__webpack_require__","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","_classCallCheck","instance","Constructor","TypeError","_typeof","iterator","constructor","toPropertyKey","t","i","r","e","toPrimitive","String","Number","_defineProperties","target","props","length","descriptor","configurable","writable","_createClass","protoProps","staticProps","Emitter","this","listeners","Map","label","callback","vm","has","set","push","index","reduce","listener","splice","_len","arguments","args","Array","_key","forEach","_listener$callback","apply","concat","_default","connectionUrl","opts","undefined","format","toLowerCase","startsWith","scheme","window","location","protocol","reconnection","reconnectionAttempts","Infinity","reconnectionDelay","reconnectTimeoutId","reconnectionCount","passToStoreHandler","connect","store","mutations","onEvent","_this","WebSocket","sendObj","send","JSON","stringify","_this2","clearTimeout","setTimeout","passToStore","_this3","eventType","event","emit","$setInstance","currentTarget","reconnect","eventName","defaultPassToStore","bind","method","toUpperCase","msg","data","parse","mutation","namespace","filter","join","action","install","Vue","connection","connectManually","Error","observer","wsInstance","$socket","$connect","connectionOpts","Observer","$disconnect","close","hasProxy","Proxy","test","toString","mixin","created","sockets","$options","addListener","deleteProperty","removeListener","keys","seal","beforeDestroy"],"sourceRoot":""}